<template name="loginForm">
  <div class="at">
    {{#unless currentUser}}
      {{#if atfpwd}}
        <h3> {{t9n "resetYourPassword"}} </h3>
      {{/if}}
      {{#if atsgin}}
        {{#if otherLoginServices}}
          <div class="at-social">
            {{#each loginServices}}
              {{> atSocial}}
            {{/each}}
            {{#if passwordLoginService}}
              <div class="email-option">
                <strong class="line-thru or-sign-in">{{t9n "OR"}}</strong>
              </div>
            {{/if}}
          </div>
        {{/if}}
        {{#unless otherLoginServices}}
          <div class="email-option">
            <h3>{{t9n "signIn"}}</h3>
          </div>
        {{/unless}}
      {{/if}}
      {{#if atsgup}}
        <h3>{{t9n "createAccount"}}</h3>
        <p class="at-signin-cta">{{t9n "ifYouAlreadyHaveAnAccount"}} <a href="#" id="at-sgin">{{t9n "signin"}}</a>.</p>
      {{/if}}
      {{#if overallError}}
        <div id="atError">
          <div class='alert alert-danger'>{{overallError}}</div>
        </div>
      {{/if}}
      {{#if result}}
        <div id="atResult">
          <div class='alert alert-success'>{{result}}</div>
        </div>
      {{/if}}
      {{#if passwordLoginService}}
        <form role="form" class="at-form">
          {{#each fields}}
            {{#if displayField}}
              <div class="form-group {{#if hasError}}has-error{{/if}} {{#if hasFeedback}}has-feedback{{/if}}">
                {{#if displayFormLabels}}
                  <label for="AT_field_{{name}}" class="control-label">
                    {{displayName}} {{#unless required}}({{t9n "optional"}}){{/unless}}
                  </label>
                {{/if}}
                <input type="{{type}}" class="form-control" id="AT_field_{{name}}" placeholder="{{placeholder}}">
                {{#if hasFeedback}}
                  <span class="glyphicon glyphicon-remove form-control-feedback {{#unless showError}}hide{{/unless}}"></span>
                {{/if}}
                <p class="help-block {{#unless showError}}hide{{/unless}}">{{errorText}}</p>
              </div>     
            {{/if}}   
          {{/each}}
          {{#unless atfpwd}}
            <p><a href="#" id="at-fpwd">{{t9n "forgotPassword"}}</a></p>
          {{/unless}}
          <div class="btn btn-default" id="at-btn">{{buttonText}}</div>
        </form>
        {{#unless atsgup}}
          <p class="at-signup-cta">{{t9n "dontHaveAnAccount"}} <a href="#" id="at-sgup">{{t9n "signUp"}}</a></p>
        {{/unless}}
      {{/if}}
    {{else}}
        <h3>Hi {{signedInAs}}</h3>
        <div class="at-social">
          {{#each loginServices}}
            {{> atSocial}}
          {{/each}}
        </div>
        <div class="btn btn-default" id="at-btn-logout">{{t9n "signOut"}}</div>
    {{/unless}}    
  </div>
</template>



<template name='atSocial'>
  <button class="btn {{disabled}}" id="at-{{this}}" name="{{this}}">
    {{#if unconfigured}}
        <i class="{{iconClass}}"></i> {{t9n "configure"}} {{capitalize this}}
    {{else}}
        {{#if currentUser}}
          <i class="{{iconClass}}"></i> Add {{capitalize this}}
        {{else}}
          <i class="{{iconClass}}"></i>
          {{t9n "signIn"}}&nbsp;{{t9n "with"}}&nbsp;{{capitalize this}}
        {{/if}}
    {{/if}}
  </button>
</template>
